// Prisma schema for MySQL on SiteGround
// DATABASE_URL should be a MySQL connection string (e.g., mysql://user:pass@host:3306/db)
// USE_DB should be set to "true" in environment variables

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Lesson {
  id               String   @id
  order            Int
  slug             String   @unique
  wikiSlug         String
  title_en         String
  title_ar         String
  duration_min     Int
  difficulty       String
  prerequisites_en Json
  prerequisites_ar Json
  materials        Json
  body             Json
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([wikiSlug])
}

model Asset {
  id        Int      @id @default(autoincrement())
  filename  String
  mimeType  String
  size      Int
  // Optional binary storage (only if STORE_MEDIA_IN_DB=true)
  data      Bytes?   @db.LongBlob
  createdAt DateTime @default(now())
}
