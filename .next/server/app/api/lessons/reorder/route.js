"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/lessons/reorder/route";
exports.ids = ["app/api/lessons/reorder/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flessons%2Freorder%2Froute&page=%2Fapi%2Flessons%2Freorder%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flessons%2Freorder%2Froute.ts&appDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flessons%2Freorder%2Froute&page=%2Fapi%2Flessons%2Freorder%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flessons%2Freorder%2Froute.ts&appDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_RoboGeex_Project_Wiki_rgx_kits_wiki_app_api_lessons_reorder_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/lessons/reorder/route.ts */ \"(rsc)/./app/api/lessons/reorder/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/lessons/reorder/route\",\n        pathname: \"/api/lessons/reorder\",\n        filename: \"route\",\n        bundlePath: \"app/api/lessons/reorder/route\"\n    },\n    resolvedPagePath: \"C:\\\\RoboGeex\\\\Project Wiki\\\\rgx-kits-wiki\\\\app\\\\api\\\\lessons\\\\reorder\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_RoboGeex_Project_Wiki_rgx_kits_wiki_app_api_lessons_reorder_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/lessons/reorder/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZsZXNzb25zJTJGcmVvcmRlciUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbGVzc29ucyUyRnJlb3JkZXIlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZsZXNzb25zJTJGcmVvcmRlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUm9ib0dlZXglNUNQcm9qZWN0JTIwV2lraSU1Q3JneC1raXRzLXdpa2klNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNSb2JvR2VleCU1Q1Byb2plY3QlMjBXaWtpJTVDcmd4LWtpdHMtd2lraSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDNkM7QUFDNUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmd4LWtpdHMtd2lraS8/NDU1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxSb2JvR2VleFxcXFxQcm9qZWN0IFdpa2lcXFxccmd4LWtpdHMtd2lraVxcXFxhcHBcXFxcYXBpXFxcXGxlc3NvbnNcXFxccmVvcmRlclxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbGVzc29ucy9yZW9yZGVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbGVzc29ucy9yZW9yZGVyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9sZXNzb25zL3Jlb3JkZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxSb2JvR2VleFxcXFxQcm9qZWN0IFdpa2lcXFxccmd4LWtpdHMtd2lraVxcXFxhcHBcXFxcYXBpXFxcXGxlc3NvbnNcXFxccmVvcmRlclxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9sZXNzb25zL3Jlb3JkZXIvcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flessons%2Freorder%2Froute&page=%2Fapi%2Flessons%2Freorder%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flessons%2Freorder%2Froute.ts&appDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/lessons/reorder/route.ts":
/*!******************************************!*\
  !*** ./app/api/lessons/reorder/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/data */ \"(rsc)/./lib/data.ts\");\n\n\n\n\nconst dynamic = \"force-dynamic\";\nfunction lessonsFilePath(wikiSlug) {\n    return path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", `lessons.${wikiSlug}.json`);\n}\nasync function readLessonsFromFile(wikiSlug) {\n    try {\n        const file = lessonsFilePath(wikiSlug);\n        const raw = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(file, \"utf-8\");\n        return JSON.parse(raw);\n    } catch  {\n        return [];\n    }\n}\nasync function POST(req) {\n    try {\n        const payload = await req.json();\n        const wikiSlug = (payload.wikiSlug || \"\").trim();\n        const sequence = Array.isArray(payload.sequence) ? payload.sequence.filter(Boolean) : [];\n        console.log(\"Reorder API called:\", {\n            wikiSlug,\n            sequence\n        });\n        if (!wikiSlug) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"wikiSlug is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!(0,_lib_data__WEBPACK_IMPORTED_MODULE_3__.getWiki)(wikiSlug)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unknown wiki\"\n            }, {\n                status: 400\n            });\n        }\n        if (!sequence.length) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Nothing to reorder\"\n            }, {\n                status: 400\n            });\n        }\n        if (process.env.USE_DB === \"true\") {\n            const { prisma } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\"));\n            if (!prisma) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Database client unavailable\"\n                }, {\n                    status: 500\n                });\n            }\n            const existing = await prisma.lesson.findMany({\n                where: {\n                    wikiSlug\n                },\n                orderBy: {\n                    order: \"asc\"\n                }\n            });\n            if (!existing.length) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"No lessons found for wiki\"\n                }, {\n                    status: 404\n                });\n            }\n            const seen = new Set();\n            const ordered = [];\n            // Always put getting-started first if it exists\n            const gettingStarted = existing.find((item)=>item.slug === \"getting-started\");\n            if (gettingStarted) {\n                ordered.push(gettingStarted);\n                seen.add(\"getting-started\");\n            }\n            // Add other lessons in the sequence order\n            for (const slug of sequence){\n                if (seen.has(slug) || slug === \"getting-started\") continue;\n                const lesson = existing.find((item)=>item.slug === slug);\n                if (lesson) {\n                    ordered.push(lesson);\n                    seen.add(slug);\n                }\n            }\n            const remainder = existing.filter((lesson)=>!seen.has(lesson.slug));\n            const finalOrder = [\n                ...ordered,\n                ...remainder\n            ];\n            console.log(\"Database reorder - final order:\", finalOrder.map((l, i)=>({\n                    slug: l.slug,\n                    order: i + 1\n                })));\n            await prisma.$transaction(finalOrder.map((lesson, idx)=>prisma.lesson.update({\n                    where: {\n                        slug: lesson.slug\n                    },\n                    data: {\n                        order: idx + 1\n                    }\n                })));\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                ok: true\n            });\n        }\n        const lessons = await readLessonsFromFile(wikiSlug);\n        if (!lessons.length) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No lessons found for wiki\"\n            }, {\n                status: 404\n            });\n        }\n        const bySlug = new Map();\n        lessons.forEach((lesson)=>bySlug.set(lesson.slug, lesson));\n        const seen = new Set();\n        const reordered = [];\n        // Always put getting-started first if it exists\n        const gettingStarted = bySlug.get(\"getting-started\");\n        if (gettingStarted) {\n            reordered.push({\n                ...gettingStarted\n            });\n            seen.add(\"getting-started\");\n        }\n        // Add other lessons in the sequence order\n        for (const slug of sequence){\n            if (seen.has(slug) || slug === \"getting-started\") continue;\n            const lesson = bySlug.get(slug);\n            if (lesson) {\n                reordered.push({\n                    ...lesson\n                });\n                seen.add(slug);\n            }\n        }\n        const remaining = lessons.filter((lesson)=>!seen.has(lesson.slug)).sort((a, b)=>(a.order || 0) - (b.order || 0));\n        const finalList = [\n            ...reordered,\n            ...remaining\n        ].map((lesson, idx)=>({\n                ...lesson,\n                order: idx + 1\n            }));\n        console.log(\"File reorder - final order:\", finalList.map((l, i)=>({\n                slug: l.slug,\n                order: i + 1\n            })));\n        const file = lessonsFilePath(wikiSlug);\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.writeFile(file, JSON.stringify(finalList, null, 2), \"utf-8\");\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            ok: true\n        });\n    } catch (error) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error?.message || \"Failed to reorder lessons\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDb0IsSUFBSSxDQUFDO1lBQUVTLE9BQU9BLE9BQU84QyxXQUFXO1FBQTRCLEdBQUc7WUFBRTdDLFFBQVE7UUFBSTtJQUNuRztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmd4LWtpdHMtd2lraS8uL2FwcC9hcGkvbGVzc29ucy9yZW9yZGVyL3JvdXRlLnRzPzZmZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tIFwiZnNcIlxuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIlxuaW1wb3J0IHsgZ2V0V2lraSB9IGZyb20gXCJAL2xpYi9kYXRhXCJcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIlxuXG50eXBlIFJlb3JkZXJQYXlsb2FkID0ge1xuICB3aWtpU2x1Zz86IHN0cmluZ1xuICBzZXF1ZW5jZT86IHN0cmluZ1tdXG59XG5cbnR5cGUgTGVzc29uUmVjb3JkID0ge1xuICBpZDogc3RyaW5nXG4gIG9yZGVyOiBudW1iZXJcbiAgc2x1Zzogc3RyaW5nXG4gIHdpa2lTbHVnOiBzdHJpbmdcbiAgdGl0bGVfZW46IHN0cmluZ1xuICB0aXRsZV9hcjogc3RyaW5nXG4gIGR1cmF0aW9uX21pbjogbnVtYmVyXG4gIGRpZmZpY3VsdHk6IHN0cmluZ1xuICBwcmVyZXF1aXNpdGVzX2VuOiBzdHJpbmdbXVxuICBwcmVyZXF1aXNpdGVzX2FyOiBzdHJpbmdbXVxuICBtYXRlcmlhbHM6IGFueVtdXG4gIGJvZHk6IGFueVxufVxuXG5mdW5jdGlvbiBsZXNzb25zRmlsZVBhdGgod2lraVNsdWc6IHN0cmluZykge1xuICByZXR1cm4gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZGF0YVwiLCBgbGVzc29ucy4ke3dpa2lTbHVnfS5qc29uYClcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVhZExlc3NvbnNGcm9tRmlsZSh3aWtpU2x1Zzogc3RyaW5nKTogUHJvbWlzZTxMZXNzb25SZWNvcmRbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGZpbGUgPSBsZXNzb25zRmlsZVBhdGgod2lraVNsdWcpXG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZSwgXCJ1dGYtOFwiKVxuICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgTGVzc29uUmVjb3JkW11cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IChhd2FpdCByZXEuanNvbigpKSBhcyBSZW9yZGVyUGF5bG9hZFxuICAgIGNvbnN0IHdpa2lTbHVnID0gKHBheWxvYWQud2lraVNsdWcgfHwgXCJcIikudHJpbSgpXG4gICAgY29uc3Qgc2VxdWVuY2UgPSBBcnJheS5pc0FycmF5KHBheWxvYWQuc2VxdWVuY2UpID8gcGF5bG9hZC5zZXF1ZW5jZS5maWx0ZXIoQm9vbGVhbikgOiBbXVxuXG4gICAgY29uc29sZS5sb2coJ1Jlb3JkZXIgQVBJIGNhbGxlZDonLCB7IHdpa2lTbHVnLCBzZXF1ZW5jZSB9KVxuXG4gICAgaWYgKCF3aWtpU2x1Zykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwid2lraVNsdWcgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICAgIGlmICghZ2V0V2lraSh3aWtpU2x1ZykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVua25vd24gd2lraVwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gICAgaWYgKCFzZXF1ZW5jZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5vdGhpbmcgdG8gcmVvcmRlclwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuVVNFX0RCID09PSBcInRydWVcIikge1xuICAgICAgY29uc3QgeyBwcmlzbWEgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3ByaXNtYVwiKVxuICAgICAgaWYgKCFwcmlzbWEpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRGF0YWJhc2UgY2xpZW50IHVuYXZhaWxhYmxlXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgICAgfVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEubGVzc29uLmZpbmRNYW55KHsgd2hlcmU6IHsgd2lraVNsdWcgfSwgb3JkZXJCeTogeyBvcmRlcjogXCJhc2NcIiB9IH0pXG4gICAgICBpZiAoIWV4aXN0aW5nLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJObyBsZXNzb25zIGZvdW5kIGZvciB3aWtpXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgICAgfVxuICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gICAgICBjb25zdCBvcmRlcmVkOiB0eXBlb2YgZXhpc3RpbmcgPSBbXVxuICAgICAgXG4gICAgICAvLyBBbHdheXMgcHV0IGdldHRpbmctc3RhcnRlZCBmaXJzdCBpZiBpdCBleGlzdHNcbiAgICAgIGNvbnN0IGdldHRpbmdTdGFydGVkID0gZXhpc3RpbmcuZmluZCgoaXRlbSkgPT4gaXRlbS5zbHVnID09PSAnZ2V0dGluZy1zdGFydGVkJylcbiAgICAgIGlmIChnZXR0aW5nU3RhcnRlZCkge1xuICAgICAgICBvcmRlcmVkLnB1c2goZ2V0dGluZ1N0YXJ0ZWQpXG4gICAgICAgIHNlZW4uYWRkKCdnZXR0aW5nLXN0YXJ0ZWQnKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgb3RoZXIgbGVzc29ucyBpbiB0aGUgc2VxdWVuY2Ugb3JkZXJcbiAgICAgIGZvciAoY29uc3Qgc2x1ZyBvZiBzZXF1ZW5jZSkge1xuICAgICAgICBpZiAoc2Vlbi5oYXMoc2x1ZykgfHwgc2x1ZyA9PT0gJ2dldHRpbmctc3RhcnRlZCcpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGxlc3NvbiA9IGV4aXN0aW5nLmZpbmQoKGl0ZW0pID0+IGl0ZW0uc2x1ZyA9PT0gc2x1ZylcbiAgICAgICAgaWYgKGxlc3Nvbikge1xuICAgICAgICAgIG9yZGVyZWQucHVzaChsZXNzb24pXG4gICAgICAgICAgc2Vlbi5hZGQoc2x1ZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgcmVtYWluZGVyID0gZXhpc3RpbmcuZmlsdGVyKChsZXNzb24pID0+ICFzZWVuLmhhcyhsZXNzb24uc2x1ZykpXG4gICAgICBjb25zdCBmaW5hbE9yZGVyID0gWy4uLm9yZGVyZWQsIC4uLnJlbWFpbmRlcl1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIHJlb3JkZXIgLSBmaW5hbCBvcmRlcjonLCBmaW5hbE9yZGVyLm1hcCgobCwgaSkgPT4gKHsgc2x1ZzogbC5zbHVnLCBvcmRlcjogaSArIDEgfSkpKVxuICAgICAgXG4gICAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKFxuICAgICAgICBmaW5hbE9yZGVyLm1hcCgobGVzc29uLCBpZHgpID0+XG4gICAgICAgICAgcHJpc21hLmxlc3Nvbi51cGRhdGUoeyB3aGVyZTogeyBzbHVnOiBsZXNzb24uc2x1ZyB9LCBkYXRhOiB7IG9yZGVyOiBpZHggKyAxIH0gfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCBsZXNzb25zID0gYXdhaXQgcmVhZExlc3NvbnNGcm9tRmlsZSh3aWtpU2x1ZylcbiAgICBpZiAoIWxlc3NvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJObyBsZXNzb25zIGZvdW5kIGZvciB3aWtpXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGJ5U2x1ZyA9IG5ldyBNYXA8c3RyaW5nLCBMZXNzb25SZWNvcmQ+KClcbiAgICBsZXNzb25zLmZvckVhY2goKGxlc3NvbikgPT4gYnlTbHVnLnNldChsZXNzb24uc2x1ZywgbGVzc29uKSlcblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgIGNvbnN0IHJlb3JkZXJlZDogTGVzc29uUmVjb3JkW10gPSBbXVxuICAgIFxuICAgIC8vIEFsd2F5cyBwdXQgZ2V0dGluZy1zdGFydGVkIGZpcnN0IGlmIGl0IGV4aXN0c1xuICAgIGNvbnN0IGdldHRpbmdTdGFydGVkID0gYnlTbHVnLmdldCgnZ2V0dGluZy1zdGFydGVkJylcbiAgICBpZiAoZ2V0dGluZ1N0YXJ0ZWQpIHtcbiAgICAgIHJlb3JkZXJlZC5wdXNoKHsgLi4uZ2V0dGluZ1N0YXJ0ZWQgfSlcbiAgICAgIHNlZW4uYWRkKCdnZXR0aW5nLXN0YXJ0ZWQnKVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgb3RoZXIgbGVzc29ucyBpbiB0aGUgc2VxdWVuY2Ugb3JkZXJcbiAgICBmb3IgKGNvbnN0IHNsdWcgb2Ygc2VxdWVuY2UpIHtcbiAgICAgIGlmIChzZWVuLmhhcyhzbHVnKSB8fCBzbHVnID09PSAnZ2V0dGluZy1zdGFydGVkJykgY29udGludWVcbiAgICAgIGNvbnN0IGxlc3NvbiA9IGJ5U2x1Zy5nZXQoc2x1ZylcbiAgICAgIGlmIChsZXNzb24pIHtcbiAgICAgICAgcmVvcmRlcmVkLnB1c2goeyAuLi5sZXNzb24gfSlcbiAgICAgICAgc2Vlbi5hZGQoc2x1ZylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZW1haW5pbmcgPSBsZXNzb25zXG4gICAgICAuZmlsdGVyKChsZXNzb24pID0+ICFzZWVuLmhhcyhsZXNzb24uc2x1ZykpXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGEub3JkZXIgfHwgMCkgLSAoYi5vcmRlciB8fCAwKSlcblxuICAgIGNvbnN0IGZpbmFsTGlzdCA9IFsuLi5yZW9yZGVyZWQsIC4uLnJlbWFpbmluZ10ubWFwKChsZXNzb24sIGlkeCkgPT4gKHtcbiAgICAgIC4uLmxlc3NvbixcbiAgICAgIG9yZGVyOiBpZHggKyAxLFxuICAgIH0pKVxuXG4gICAgY29uc29sZS5sb2coJ0ZpbGUgcmVvcmRlciAtIGZpbmFsIG9yZGVyOicsIGZpbmFsTGlzdC5tYXAoKGwsIGkpID0+ICh7IHNsdWc6IGwuc2x1Zywgb3JkZXI6IGkgKyAxIH0pKSlcblxuICAgIGNvbnN0IGZpbGUgPSBsZXNzb25zRmlsZVBhdGgod2lraVNsdWcpXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGZpbGUsIEpTT04uc3RyaW5naWZ5KGZpbmFsTGlzdCwgbnVsbCwgMiksIFwidXRmLThcIilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yPy5tZXNzYWdlIHx8IFwiRmFpbGVkIHRvIHJlb3JkZXIgbGVzc29uc1wiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByb21pc2VzIiwiZnMiLCJwYXRoIiwiZ2V0V2lraSIsImR5bmFtaWMiLCJsZXNzb25zRmlsZVBhdGgiLCJ3aWtpU2x1ZyIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwicmVhZExlc3NvbnNGcm9tRmlsZSIsImZpbGUiLCJyYXciLCJyZWFkRmlsZSIsIkpTT04iLCJwYXJzZSIsIlBPU1QiLCJyZXEiLCJwYXlsb2FkIiwianNvbiIsInRyaW0iLCJzZXF1ZW5jZSIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsIkJvb2xlYW4iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJzdGF0dXMiLCJsZW5ndGgiLCJlbnYiLCJVU0VfREIiLCJwcmlzbWEiLCJleGlzdGluZyIsImxlc3NvbiIsImZpbmRNYW55Iiwid2hlcmUiLCJvcmRlckJ5Iiwib3JkZXIiLCJzZWVuIiwiU2V0Iiwib3JkZXJlZCIsImdldHRpbmdTdGFydGVkIiwiZmluZCIsIml0ZW0iLCJzbHVnIiwicHVzaCIsImFkZCIsImhhcyIsInJlbWFpbmRlciIsImZpbmFsT3JkZXIiLCJtYXAiLCJsIiwiaSIsIiR0cmFuc2FjdGlvbiIsImlkeCIsInVwZGF0ZSIsImRhdGEiLCJvayIsImxlc3NvbnMiLCJieVNsdWciLCJNYXAiLCJmb3JFYWNoIiwic2V0IiwicmVvcmRlcmVkIiwiZ2V0IiwicmVtYWluaW5nIiwic29ydCIsImEiLCJiIiwiZmluYWxMaXN0Iiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/lessons/reorder/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/data.ts":
/*!*********************!*\
  !*** ./lib/data.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getKit: () => (/* binding */ getKit),\n/* harmony export */   getKits: () => (/* binding */ getKits),\n/* harmony export */   getLesson: () => (/* binding */ getLesson),\n/* harmony export */   getLessons: () => (/* binding */ getLessons),\n/* harmony export */   getNextLesson: () => (/* binding */ getNextLesson),\n/* harmony export */   getPrevLesson: () => (/* binding */ getPrevLesson),\n/* harmony export */   getWiki: () => (/* binding */ getWiki),\n/* harmony export */   getWikiByDomain: () => (/* binding */ getWikiByDomain),\n/* harmony export */   getWikis: () => (/* binding */ getWikis)\n/* harmony export */ });\n/* harmony import */ var _data_kits_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data/kits.json */ \"(rsc)/./data/kits.json\");\n/* harmony import */ var _data_wikis_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/data/wikis.json */ \"(rsc)/./data/wikis.json\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n// Avoid static import for lessons so runtime changes are visible\n\n// Use optional import to avoid bundling 'fs' in client; only server files should import functions using fs.\nlet readFileSync;\ntry {\n    readFileSync = (__webpack_require__(/*! fs */ \"fs\").readFileSync);\n} catch  {}\nconst kits = _data_kits_json__WEBPACK_IMPORTED_MODULE_0__;\nconst wikis = _data_wikis_json__WEBPACK_IMPORTED_MODULE_1__;\nfunction wikiSlugForKit(kitSlug) {\n    const kit = kits.find((k)=>k.slug === kitSlug);\n    return kit?.wikiSlug || kitSlug;\n}\nfunction getWikis() {\n    return wikis;\n}\nfunction getWiki(slug) {\n    return wikis.find((w)=>w.slug === slug);\n}\nfunction getWikiByDomain(host) {\n    const normalised = host?.split(\":\")[0].toLowerCase();\n    if (!normalised) return undefined;\n    return wikis.find((w)=>(w.domains || []).map((d)=>d.toLowerCase()).includes(normalised));\n}\nfunction getKits(wikiSlug) {\n    if (wikiSlug) return kits.filter((k)=>k.wikiSlug === wikiSlug);\n    return kits;\n}\nfunction getKit(slug, wikiSlug) {\n    return kits.find((k)=>k.slug === slug && (!wikiSlug || k.wikiSlug === wikiSlug));\n}\nfunction getLessons(kitSlug) {\n    const wikiSlug = wikiSlugForKit(kitSlug);\n    if (process.env.USE_DB === \"true\") {\n        try {\n            const { syncGetLessons } = __webpack_require__(/*! ./server-data */ \"(rsc)/./lib/server-data.ts\");\n            return syncGetLessons(wikiSlug);\n        } catch  {}\n    }\n    try {\n        const p = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", `lessons.${wikiSlug}.json`);\n        const raw = readFileSync ? readFileSync(p, \"utf-8\") : \"[]\";\n        return JSON.parse(raw);\n    } catch  {}\n    return [];\n}\nfunction getLesson(kit, lessonSlug) {\n    return getLessons(kit).find((l)=>l.slug === lessonSlug);\n}\nfunction sortLessons(list) {\n    return list.slice().sort((a, b)=>(a.order || 0) - (b.order || 0));\n}\nfunction getNextLesson(kit, slug) {\n    const list = sortLessons(getLessons(kit));\n    const idx = list.findIndex((l)=>l.slug === slug);\n    if (idx >= 0 && idx < list.length - 1) return list[idx + 1];\n}\nfunction getPrevLesson(kit, slug) {\n    const list = sortLessons(getLessons(kit));\n    const idx = list.findIndex((l)=>l.slug === slug);\n    if (idx > 0) return list[idx - 1];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0Q7QUFDTyxTQUFTRyxjQUFjOUMsR0FBVyxFQUFFRyxJQUFZO0lBQ3JELE1BQU1pQyxPQUFPRCxZQUFZZCxXQUFXckI7SUFDcEMsTUFBTTJDLE1BQU1QLEtBQUtRLFNBQVMsQ0FBQ1YsQ0FBQUEsSUFBS0EsRUFBRS9CLElBQUksS0FBS0E7SUFDM0MsSUFBSXdDLE1BQU0sR0FBRyxPQUFPUCxJQUFJLENBQUNPLE1BQU0sRUFBRTtBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JneC1raXRzLXdpa2kvLi9saWIvZGF0YS50cz8xNmYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBraXRzRGF0YSBmcm9tICdAL2RhdGEva2l0cy5qc29uJ1xuaW1wb3J0IHdpa2lzRGF0YSBmcm9tICdAL2RhdGEvd2lraXMuanNvbidcbi8vIEF2b2lkIHN0YXRpYyBpbXBvcnQgZm9yIGxlc3NvbnMgc28gcnVudGltZSBjaGFuZ2VzIGFyZSB2aXNpYmxlXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuLy8gVXNlIG9wdGlvbmFsIGltcG9ydCB0byBhdm9pZCBidW5kbGluZyAnZnMnIGluIGNsaWVudDsgb25seSBzZXJ2ZXIgZmlsZXMgc2hvdWxkIGltcG9ydCBmdW5jdGlvbnMgdXNpbmcgZnMuXG5sZXQgcmVhZEZpbGVTeW5jOiBhbnlcbnRyeSB7IHJlYWRGaWxlU3luYyA9IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jIH0gY2F0Y2gge31cblxuZXhwb3J0IGludGVyZmFjZSBXaWtpIHtcbiAgc2x1Zzogc3RyaW5nXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgZG9tYWlucz86IHN0cmluZ1tdXG4gIGRlZmF1bHRMb2NhbGU/OiBzdHJpbmdcbiAgZGVmYXVsdExlc3NvblNsdWc/OiBzdHJpbmdcbiAgcmVzb3VyY2VzVXJsPzogc3RyaW5nXG59XG5leHBvcnQgaW50ZXJmYWNlIEtpdCB7XG4gIHNsdWc6IHN0cmluZ1xuICB3aWtpU2x1Zzogc3RyaW5nXG4gIHRpdGxlX2VuOiBzdHJpbmdcbiAgdGl0bGVfYXI6IHN0cmluZ1xuICBoZXJvSW1hZ2U6IHN0cmluZ1xuICBvdmVydmlld19lbjogc3RyaW5nXG4gIG92ZXJ2aWV3X2FyOiBzdHJpbmdcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWwgeyBxdHk6IG51bWJlcjsgbmFtZV9lbjogc3RyaW5nOyBuYW1lX2FyOiBzdHJpbmc7IHNrdT86IHN0cmluZyB9XG5leHBvcnQgaW50ZXJmYWNlIExlc3NvbkJvZHlJdGVtIHtcbiAgdHlwZTogJ3BhcmFncmFwaCcgfCAnaGVhZGluZycgfCAnc3RlcCcgfCAnY2FsbG91dCcgfCAnY29kZVRhYnMnIHwgJ2ltYWdlJ1xuICBlbj86IHN0cmluZzsgYXI/OiBzdHJpbmdcbiAgdGl0bGVfZW4/OiBzdHJpbmc7IHRpdGxlX2FyPzogc3RyaW5nXG4gIGNhcHRpb25fZW4/OiBzdHJpbmc7IGNhcHRpb25fYXI/OiBzdHJpbmdcbiAgdmFyaWFudD86ICdpbmZvJyB8ICd0aXAnIHwgJ3dhcm5pbmcnXG4gIGltYWdlPzogc3RyaW5nXG4gIGFyZHVpbm8/OiBzdHJpbmdcbiAgbWFrZWNvZGVVcmw/OiBzdHJpbmdcbiAgbGV2ZWw/OiBudW1iZXJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTGVzc29uIHtcbiAgaWQ6IHN0cmluZ1xuICBvcmRlcjogbnVtYmVyXG4gIHNsdWc6IHN0cmluZ1xuICB0aXRsZV9lbjogc3RyaW5nXG4gIHRpdGxlX2FyOiBzdHJpbmdcbiAgZHVyYXRpb25fbWluOiBudW1iZXJcbiAgZGlmZmljdWx0eTogc3RyaW5nXG4gIHByZXJlcXVpc2l0ZXNfZW46IHN0cmluZ1tdXG4gIHByZXJlcXVpc2l0ZXNfYXI6IHN0cmluZ1tdXG4gIG1hdGVyaWFsczogTWF0ZXJpYWxbXVxuICBib2R5OiBMZXNzb25Cb2R5SXRlbVtdXG4gIHdpa2lTbHVnPzogc3RyaW5nXG4gIGlzR2V0dGluZ1N0YXJ0ZWQ/OiBib29sZWFuXG4gIGNyZWF0ZWRBdD86IHN0cmluZ1xuICB1cGRhdGVkQXQ/OiBzdHJpbmdcbn1cblxuY29uc3Qga2l0cyA9IGtpdHNEYXRhIGFzIEtpdFtdXG5jb25zdCB3aWtpcyA9IHdpa2lzRGF0YSBhcyBXaWtpW11cblxuZnVuY3Rpb24gd2lraVNsdWdGb3JLaXQoa2l0U2x1Zzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qga2l0ID0ga2l0cy5maW5kKGsgPT4gay5zbHVnID09PSBraXRTbHVnKVxuICByZXR1cm4ga2l0Py53aWtpU2x1ZyB8fCBraXRTbHVnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWtpcygpOiBXaWtpW10geyByZXR1cm4gd2lraXMgfVxuZXhwb3J0IGZ1bmN0aW9uIGdldFdpa2koc2x1Zzogc3RyaW5nKSB7IHJldHVybiB3aWtpcy5maW5kKHcgPT4gdy5zbHVnID09PSBzbHVnKSB9XG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lraUJ5RG9tYWluKGhvc3Q/OiBzdHJpbmcgfCBudWxsKSB7XG4gIGNvbnN0IG5vcm1hbGlzZWQgPSBob3N0Py5zcGxpdCgnOicpWzBdLnRvTG93ZXJDYXNlKClcbiAgaWYgKCFub3JtYWxpc2VkKSByZXR1cm4gdW5kZWZpbmVkXG4gIHJldHVybiB3aWtpcy5maW5kKHcgPT4gKHcuZG9tYWlucyB8fCBbXSkubWFwKGQgPT4gZC50b0xvd2VyQ2FzZSgpKS5pbmNsdWRlcyhub3JtYWxpc2VkKSlcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRLaXRzKHdpa2lTbHVnPzogc3RyaW5nKTogS2l0W10ge1xuICBpZiAod2lraVNsdWcpIHJldHVybiBraXRzLmZpbHRlcihrID0+IGsud2lraVNsdWcgPT09IHdpa2lTbHVnKVxuICByZXR1cm4ga2l0c1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEtpdChzbHVnOiBzdHJpbmcsIHdpa2lTbHVnPzogc3RyaW5nKSB7XG4gIHJldHVybiBraXRzLmZpbmQoayA9PiBrLnNsdWcgPT09IHNsdWcgJiYgKCF3aWtpU2x1ZyB8fCBrLndpa2lTbHVnID09PSB3aWtpU2x1ZykpXG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVzc29ucyhraXRTbHVnOiBzdHJpbmcpOiBMZXNzb25bXSB7XG4gIGNvbnN0IHdpa2lTbHVnID0gd2lraVNsdWdGb3JLaXQoa2l0U2x1ZylcbiAgaWYgKHByb2Nlc3MuZW52LlVTRV9EQiA9PT0gJ3RydWUnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3luY0dldExlc3NvbnMgfSA9IHJlcXVpcmUoJy4vc2VydmVyLWRhdGEnKSBhcyB0eXBlb2YgaW1wb3J0KCcuL3NlcnZlci1kYXRhJylcbiAgICAgIHJldHVybiBzeW5jR2V0TGVzc29ucyh3aWtpU2x1ZylcbiAgICB9IGNhdGNoIHt9XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBwID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgYGxlc3NvbnMuJHt3aWtpU2x1Z30uanNvbmApXG4gICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jID8gcmVhZEZpbGVTeW5jKHAsICd1dGYtOCcpIDogJ1tdJ1xuICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgTGVzc29uW11cbiAgfSBjYXRjaCB7fVxuICByZXR1cm4gW11cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZXNzb24oa2l0OiBzdHJpbmcsIGxlc3NvblNsdWc6IHN0cmluZykge1xuICByZXR1cm4gZ2V0TGVzc29ucyhraXQpLmZpbmQobCA9PiBsLnNsdWcgPT09IGxlc3NvblNsdWcpXG59XG5cbmZ1bmN0aW9uIHNvcnRMZXNzb25zKGxpc3Q6IExlc3NvbltdKTogTGVzc29uW10ge1xuICByZXR1cm4gbGlzdC5zbGljZSgpLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyIHx8IDApIC0gKGIub3JkZXIgfHwgMCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0TGVzc29uKGtpdDogc3RyaW5nLCBzbHVnOiBzdHJpbmcpIHtcbiAgY29uc3QgbGlzdCA9IHNvcnRMZXNzb25zKGdldExlc3NvbnMoa2l0KSlcbiAgY29uc3QgaWR4ID0gbGlzdC5maW5kSW5kZXgobCA9PiBsLnNsdWcgPT09IHNsdWcpXG4gIGlmIChpZHggPj0gMCAmJiBpZHggPCBsaXN0Lmxlbmd0aCAtIDEpIHJldHVybiBsaXN0W2lkeCArIDFdXG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJldkxlc3NvbihraXQ6IHN0cmluZywgc2x1Zzogc3RyaW5nKSB7XG4gIGNvbnN0IGxpc3QgPSBzb3J0TGVzc29ucyhnZXRMZXNzb25zKGtpdCkpXG4gIGNvbnN0IGlkeCA9IGxpc3QuZmluZEluZGV4KGwgPT4gbC5zbHVnID09PSBzbHVnKVxuICBpZiAoaWR4ID4gMCkgcmV0dXJuIGxpc3RbaWR4IC0gMV1cbn1cbiJdLCJuYW1lcyI6WyJraXRzRGF0YSIsIndpa2lzRGF0YSIsInBhdGgiLCJyZWFkRmlsZVN5bmMiLCJyZXF1aXJlIiwia2l0cyIsIndpa2lzIiwid2lraVNsdWdGb3JLaXQiLCJraXRTbHVnIiwia2l0IiwiZmluZCIsImsiLCJzbHVnIiwid2lraVNsdWciLCJnZXRXaWtpcyIsImdldFdpa2kiLCJ3IiwiZ2V0V2lraUJ5RG9tYWluIiwiaG9zdCIsIm5vcm1hbGlzZWQiLCJzcGxpdCIsInRvTG93ZXJDYXNlIiwidW5kZWZpbmVkIiwiZG9tYWlucyIsIm1hcCIsImQiLCJpbmNsdWRlcyIsImdldEtpdHMiLCJmaWx0ZXIiLCJnZXRLaXQiLCJnZXRMZXNzb25zIiwicHJvY2VzcyIsImVudiIsIlVTRV9EQiIsInN5bmNHZXRMZXNzb25zIiwicCIsImpvaW4iLCJjd2QiLCJyYXciLCJKU09OIiwicGFyc2UiLCJnZXRMZXNzb24iLCJsZXNzb25TbHVnIiwibCIsInNvcnRMZXNzb25zIiwibGlzdCIsInNsaWNlIiwic29ydCIsImEiLCJiIiwib3JkZXIiLCJnZXROZXh0TGVzc29uIiwiaWR4IiwiZmluZEluZGV4IiwibGVuZ3RoIiwiZ2V0UHJldkxlc3NvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/data.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n// Safe Prisma client loader for server-only usage\n// Avoids importing @prisma/client at build time when not installed\nlet prisma = undefined;\nif (true) {\n    try {\n        const mod = eval(\"require\")(\"@prisma/client\");\n        const PrismaClient = mod?.PrismaClient;\n        if (PrismaClient) {\n            // Reuse in dev to avoid creating many connections\n            const g = globalThis;\n            prisma = g.__prisma || new PrismaClient();\n            if (true) g.__prisma = prisma;\n        }\n    } catch (e) {\n        // @prisma/client not installed â€” leave prisma as undefined\n        prisma = undefined;\n    }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsa0RBQWtEO0FBQ2xELG1FQUFtRTtBQUVuRSxJQUFJQSxTQUFjQztBQUVsQixJQUFJLElBQWtCLEVBQWE7SUFDakMsSUFBSTtRQUNGLE1BQU1DLE1BQU0sS0FBTSxXQUFZO1FBQzlCLE1BQU1FLGVBQWVGLEtBQUtFO1FBQzFCLElBQUlBLGNBQWM7WUFDaEIsa0RBQWtEO1lBQ2xELE1BQU1DLElBQVNDO1lBQ2ZOLFNBQVNLLEVBQUVFLFFBQVEsSUFBSSxJQUFJSDtZQUMzQixJQUFJSSxJQUF5QixFQUFjSCxFQUFFRSxRQUFRLEdBQUdQO1FBQzFEO0lBQ0YsRUFBRSxPQUFPUyxHQUFHO1FBQ1YsMkRBQTJEO1FBQzNEVCxTQUFTQztJQUNYO0FBQ0Y7QUFFaUI7QUFDakIsaUVBQWVELE1BQU1BLEVBQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZ3gta2l0cy13aWtpLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNhZmUgUHJpc21hIGNsaWVudCBsb2FkZXIgZm9yIHNlcnZlci1vbmx5IHVzYWdlXG4vLyBBdm9pZHMgaW1wb3J0aW5nIEBwcmlzbWEvY2xpZW50IGF0IGJ1aWxkIHRpbWUgd2hlbiBub3QgaW5zdGFsbGVkXG5cbmxldCBwcmlzbWE6IGFueSA9IHVuZGVmaW5lZFxuXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtb2QgPSAoZXZhbCgncmVxdWlyZScpKSgnQHByaXNtYS9jbGllbnQnKSBhcyBhbnlcbiAgICBjb25zdCBQcmlzbWFDbGllbnQgPSBtb2Q/LlByaXNtYUNsaWVudFxuICAgIGlmIChQcmlzbWFDbGllbnQpIHtcbiAgICAgIC8vIFJldXNlIGluIGRldiB0byBhdm9pZCBjcmVhdGluZyBtYW55IGNvbm5lY3Rpb25zXG4gICAgICBjb25zdCBnOiBhbnkgPSBnbG9iYWxUaGlzIGFzIGFueVxuICAgICAgcHJpc21hID0gZy5fX3ByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KClcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnLl9fcHJpc21hID0gcHJpc21hXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gQHByaXNtYS9jbGllbnQgbm90IGluc3RhbGxlZCDigJQgbGVhdmUgcHJpc21hIGFzIHVuZGVmaW5lZFxuICAgIHByaXNtYSA9IHVuZGVmaW5lZFxuICB9XG59XG5cbmV4cG9ydCB7IHByaXNtYSB9XG5leHBvcnQgZGVmYXVsdCBwcmlzbWEgYXMgYW55XHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJ1bmRlZmluZWQiLCJtb2QiLCJldmFsIiwiUHJpc21hQ2xpZW50IiwiZyIsImdsb2JhbFRoaXMiLCJfX3ByaXNtYSIsInByb2Nlc3MiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/server-data.ts":
/*!****************************!*\
  !*** ./lib/server-data.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLessonBySlug: () => (/* binding */ getLessonBySlug),\n/* harmony export */   getLessonsFromDb: () => (/* binding */ getLessonsFromDb),\n/* harmony export */   syncGetLessons: () => (/* binding */ syncGetLessons)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n// Server-only helpers to fetch from DB when USE_DB=true\n\nfunction syncGetLessons(kitSlug) {\n    throw new Error(\"syncGetLessons is not usable in sync context. Use API or refactor to async.\");\n}\nasync function getLessonsFromDb(wikiSlug) {\n    const rows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].lesson.findMany({\n        where: wikiSlug ? {\n            wikiSlug\n        } : undefined,\n        orderBy: [\n            {\n                order: \"asc\"\n            }\n        ]\n    });\n    return rows;\n}\nasync function getLessonBySlug(slug) {\n    const row = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].lesson.findUnique({\n        where: {\n            slug\n        }\n    });\n    return row;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmVyLWRhdGEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLHdEQUF3RDtBQUV2QjtBQUUxQixTQUFTQyxlQUFlQyxPQUFlO0lBQzVDLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVPLGVBQWVDLGlCQUFpQkMsUUFBaUI7SUFDdEQsTUFBTUMsT0FBTyxNQUFNTixtREFBTUEsQ0FBQ08sTUFBTSxDQUFDQyxRQUFRLENBQUM7UUFDeENDLE9BQU9KLFdBQVc7WUFBRUE7UUFBUyxJQUFJSztRQUNqQ0MsU0FBUztZQUFDO2dCQUFFQyxPQUFPO1lBQU07U0FBRTtJQUM3QjtJQUNBLE9BQU9OO0FBQ1Q7QUFFTyxlQUFlTyxnQkFBZ0JDLElBQVk7SUFDaEQsTUFBTUMsTUFBTSxNQUFNZixtREFBTUEsQ0FBQ08sTUFBTSxDQUFDUyxVQUFVLENBQUM7UUFBRVAsT0FBTztZQUFFSztRQUFLO0lBQUU7SUFDN0QsT0FBT0M7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3JneC1raXRzLXdpa2kvLi9saWIvc2VydmVyLWRhdGEudHM/MmM3OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZXJ2ZXItb25seSBoZWxwZXJzIHRvIGZldGNoIGZyb20gREIgd2hlbiBVU0VfREI9dHJ1ZVxyXG5pbXBvcnQgdHlwZSB7IExlc3NvbiB9IGZyb20gJ0AvbGliL2RhdGEnXHJcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvcHJpc21hJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN5bmNHZXRMZXNzb25zKGtpdFNsdWc6IHN0cmluZyk6IExlc3NvbltdIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ3N5bmNHZXRMZXNzb25zIGlzIG5vdCB1c2FibGUgaW4gc3luYyBjb250ZXh0LiBVc2UgQVBJIG9yIHJlZmFjdG9yIHRvIGFzeW5jLicpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMZXNzb25zRnJvbURiKHdpa2lTbHVnPzogc3RyaW5nKTogUHJvbWlzZTxMZXNzb25bXT4ge1xyXG4gIGNvbnN0IHJvd3MgPSBhd2FpdCBwcmlzbWEubGVzc29uLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB3aWtpU2x1ZyA/IHsgd2lraVNsdWcgfSA6IHVuZGVmaW5lZCxcclxuICAgIG9yZGVyQnk6IFt7IG9yZGVyOiAnYXNjJyB9XSxcclxuICB9KVxyXG4gIHJldHVybiByb3dzIGFzIHVua25vd24gYXMgTGVzc29uW11cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExlc3NvbkJ5U2x1ZyhzbHVnOiBzdHJpbmcpOiBQcm9taXNlPExlc3NvbiB8IHVuZGVmaW5lZD4ge1xyXG4gIGNvbnN0IHJvdyA9IGF3YWl0IHByaXNtYS5sZXNzb24uZmluZFVuaXF1ZSh7IHdoZXJlOiB7IHNsdWcgfSB9KVxyXG4gIHJldHVybiByb3cgYXMgdW5rbm93biBhcyBMZXNzb24gfCB1bmRlZmluZWRcclxufVxyXG4iXSwibmFtZXMiOlsicHJpc21hIiwic3luY0dldExlc3NvbnMiLCJraXRTbHVnIiwiRXJyb3IiLCJnZXRMZXNzb25zRnJvbURiIiwid2lraVNsdWciLCJyb3dzIiwibGVzc29uIiwiZmluZE1hbnkiLCJ3aGVyZSIsInVuZGVmaW5lZCIsIm9yZGVyQnkiLCJvcmRlciIsImdldExlc3NvbkJ5U2x1ZyIsInNsdWciLCJyb3ciLCJmaW5kVW5pcXVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/server-data.ts\n");

/***/ }),

/***/ "(rsc)/./data/kits.json":
/*!************************!*\
  !*** ./data/kits.json ***!
  \************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"slug":"student-kit","wikiSlug":"student-kit","title_en":"Arduino Student Kit","title_ar":"???????????? ???????????? Arduino","heroImage":"/images/student-kit-hero.jpg","overview_en":"Learn electronics and programming with hands-on projects using Arduino UNO.","overview_ar":"???????? ???????????????????????? ???????????????? ???? ???????? ???????????? ?????????? ???????????????? Arduino UNO."}]');

/***/ }),

/***/ "(rsc)/./data/wikis.json":
/*!*************************!*\
  !*** ./data/wikis.json ***!
  \*************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"slug":"student-kit","displayName":"Arduino Student Kit","domains":["student-kit.localhost","localhost","127.0.0.1"],"defaultLocale":"en","defaultLessonSlug":"getting-started","resourcesUrl":"/resources"}]');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flessons%2Freorder%2Froute&page=%2Fapi%2Flessons%2Freorder%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flessons%2Freorder%2Froute.ts&appDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CRoboGeex%5CProject%20Wiki%5Crgx-kits-wiki&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();